{% extends 'base.html' %}
{% block head %}
<title>Spending Charts</title>
{% endblock %}

{% block content %}
<h1>Spending Charts</h1>

<form method="POST" action="{{ url_for('add_spending') }}">
    <input type="text" name="category" placeholder="Category" required>
    <input type="number" step="0.01" name="amount" placeholder="Amount" required>
    <button type="submit">Add Spending</button>
</form>

<canvas id="spendingChart" width="400" height="200"></canvas>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
const ctx = document.getElementById('spendingChart').getContext('2d');
const chart = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: {{ categories|tojson }},
        datasets: [{
            label: 'Spending by Category',
            data: {{ amounts|tojson }},
            backgroundColor: 'rgba(75, 192, 192, 0.6)'
        }]
    },
    options: { responsive: true }
});
</script>
{% endblock %}
